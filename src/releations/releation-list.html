<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="/plugin/axios/axios.js"></script>
    <script src="/plugin/loadsh/lodash.core.js"></script>
    <script src="/plugin/d3/d3.js"></script>
    <script src="/plugin/echarts/echarts.min.js"></script>
    <script src="/plugin/jquery/jquery.js"></script>
    <script src="/plugin/vue/vue.js"></script>
    <!-- 引入 layui.css -->
    <link rel="stylesheet" href="//unpkg.com/layui@2.6.8/dist/css/layui.css">
    <!-- 引入 layui.js -->
    <script src="//unpkg.com/layui@2.6.8/dist/layui.js"></script>

    <title>仪表盘</title>
    <style>
        .layui-container {
            margin: 0px !important;
            width: auto !important;
        }
    </style>
</head>

<body>
    <div class="c">
        <div>
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
                <legend>人物关系图谱列表</legend>
            </fieldset>
            <div>
                <button class="btn-add layui-btn layui-btn-primary layui-border-green">添加关系图谱</button>
            </div>
            <table class="layui-table" id="demo" lay-filter="demo"></table>
        </div>
    </div>
</body>
<script src="/static/js/components.js"></script>
<script src="/static/js/comm.js"></script>
<script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑节点</a>
    <a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="view">查看</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>
<script>
    layui.use('table', function () {
        var table = layui.table;
        //展示已知数据
        table.render({
            elem: '#demo'
            , url: $conf.baseurl + '/api/force/maps'
            , cellMinWidth: 80
            , cols: [[ //标题栏
                { field: 'id', title: 'ID', sort: true }
                , { field: 'name', title: '标题', sort: true }
                , { field: 'type', title: '类型' }
                , { field: 'createtime', title: '创建时间' }
                , { fixed: 'right', title: '操作', toolbar: '#barDemo' }
            ]]
            , page: true

            // ,skin: 'line'
            , even: true
        });
        //监听工具条
        table.on('tool(demo)', function (obj) {
            var data = obj.data;
            if ("edit" == obj) {
                window.location.href = "/src/releations/releation-edit.html?map=" + data.id;
            } else if ("view" == obj) {
                window.location.href = "/src/releations/releation-view.html?map=" + data.id;
            }
        });

    });

    $(".btn-add").click(function () {
        window.location.href = "/src/releations/releation-create.html";
    });
</script>

</html>